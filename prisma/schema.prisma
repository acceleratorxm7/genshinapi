generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model CharacterInfo {
  id                 Int                  @id @default(autoincrement())
  element_key        String
  elements           Element              @relation(fields: [element_key], references: [key])
  gender_key         String
  gender             Gender               @relation(fields: [gender_key], references: [key])
  level              Int
  location           String
  name               String
  quotes             String
  star               String
  CharacterAscension CharacterAscension[]
  CharacterIcon      CharacterIcon[]
}

model CharacterIcon {
  character_key Int           @id
  CharacterInfo CharacterInfo @relation(fields: [character_key], references: [id])
}

model CharacterAscension {
  character_key Int
  order         Int
  item_key      Int
  item_amount   Int
  ItemInfo      ItemInfo      @relation(fields: [item_key], references: [id])
  CharacterInfo CharacterInfo @relation(fields: [character_key], references: [id])

  @@id([character_key, order])
}

model Element {
  key           String          @id
  text          String
  CharacterInfo CharacterInfo[]
  ElementIcon   ElementIcon?
}

model ElementIcon {
  element     Element @relation(fields: [key], references: [key])
  key         String  @id
  discord_key String
  url         String
}

model ItemInfo {
  id              Int              @id @default(autoincrement())
  name            String
  level           Int
  description     String?
  image           String?
  buff_override   String?
  organization_id Int
  organization    ItemOrganization @relation(fields: [organization_id], references: [id])

  CharacterAscension CharacterAscension[]
  @@index([name])
}

model ItemOrganization {
  id           Int           @id @default(autoincrement())
  category_key String
  class_key    String
  subclass_key String?
  category     ItemCategory  @relation(fields: [category_key], references: [key])
  class        ItemClass     @relation(fields: [class_key], references: [key])
  subclass     ItemSubclass? @relation(fields: [subclass_key], references: [key])
  ItemInfo     ItemInfo[]
}

model ItemCategory {
  key              String             @id
  text             String
  ItemOrganization ItemOrganization[]
}

model ItemClass {
  key              String             @id
  text             String
  ItemOrganization ItemOrganization[]
}

model ItemSubclass {
  key              String             @id
  text             String
  icon_key         Int?
  icon             ItemIcon?          @relation(fields: [icon_key], references: [id])
  ItemOrganization ItemOrganization[]
}

model ItemIcon {
  id           Int            @id @default(autoincrement())
  identifier   String?
  discord_key  String
  url          String
  ItemSubclass ItemSubclass[]
}

model Gender {
  key           String          @id @unique
  text          String
  CharacterInfo CharacterInfo[]
}

model skillType {
  key  String @id @unique
  text String
}
